<!DOCTYPE html>
<html class="light" lang="ko">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <title>Tokyo Sakura Guide 2026</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <!-- Noto Sans JP & Plus Jakarta Sans fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#ea2a33",
                        "background-light": "#f8f6f6",
                        "background-dark": "#1a1111",
                        "sakura-pink": "#ffd1dc",
                        "sky-blue": "#e0f2fe",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "Noto Sans JP", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "1rem",
                        "lg": "2rem",
                        "xl": "3rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        body { 
            font-family: 'Plus Jakarta Sans', 'Noto Sans JP', sans-serif; 
            -webkit-font-smoothing: antialiased;
        }
        .sakura-gradient {
            background: linear-gradient(180deg, #e0f2fe 0%, #ffffff 40%, #fff1f2 100%);
            background-attachment: fixed;
        }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .transition-view { transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        
        /* Sakura Petal Animation */
        .petal {
            position: absolute;
            background-color: #ffdae9;
            border-radius: 150% 0 150% 0;
            opacity: 0.7;
            pointer-events: none;
            z-index: 1;
            animation: fall linear infinite;
        }
        @keyframes fall {
            0% { transform: translate(0, -10px) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translate(100px, 100vh) rotate(360deg); opacity: 0; }
        }

        .ads-slot {
            background: rgba(234, 42, 51, 0.03);
            border: 1px dashed rgba(234, 42, 51, 0.15);
            display: flex; align-items: center; justify-content: center;
            color: #ea2a33; font-size: 11px; font-weight: 700;
            margin: 24px 0; min-height: 120px; border-radius: 1.5rem;
            text-transform: uppercase; letter-spacing: 1px;
        }

        /* Timeline Styles */
        .timeline-track {
            height: 6px;
            background: #eee;
            border-radius: 3px;
            position: relative;
        }
        .timeline-progress {
            height: 100%;
            background: #ea2a33;
            border-radius: 3px;
            position: absolute;
            left: 0;
            top: 0;
        }
        .timeline-marker {
            position: absolute;
            top: -4px;
            width: 14px;
            height: 14px;
            background: #fff;
            border: 3px solid #ea2a33;
            border-radius: 50%;
            transform: translateX(-50%);
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-[#181111] dark:text-white transition-colors duration-300 antialiased overflow-x-hidden">
    
    <!-- Background Animation Container -->
    <div id="petalContainer" class="fixed inset-0 pointer-events-none overflow-hidden z-0"></div>

    <div id="app" class="relative mx-auto flex h-auto min-h-screen w-full max-w-[480px] flex-col overflow-x-hidden shadow-2xl bg-white/30 dark:bg-background-dark/30 backdrop-blur-[2px] sakura-gradient">
        
        <!-- View: Home -->
        <div id="homeView" class="transition-view flex flex-col w-full relative z-10">
            <div class="h-12 w-full"></div>
            
            <div class="px-6 flex justify-between items-center">
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined text-primary text-2xl font-bold">location_city</span>
                    <span class="text-[10px] font-black text-gray-400 uppercase tracking-widest">Tokyo 2026</span>
                </div>
                <button id="langBtnHome" class="px-4 py-2 rounded-full bg-white/80 dark:bg-black/40 backdrop-blur-md border border-white text-[10px] font-bold text-primary shadow-sm active:scale-95 transition-all">
                    JP / 日本語
                </button>
            </div>

            <!-- Hero Section -->
            <div class="relative h-[32vh] w-full flex flex-col items-center justify-center px-6">
                <div class="absolute top-5 opacity-5 pointer-events-none">
                    <span class="material-symbols-outlined text-[200px] text-primary">castle</span>
                </div>
                <div class="relative z-10 text-center">
                    <span class="inline-block px-4 py-1 rounded-full bg-white/40 dark:bg-black/20 backdrop-blur-sm text-[10px] font-black tracking-[0.2em] text-primary mb-4 uppercase border border-primary/10">Spring 2026 Edition</span>
                    <h1 id="homeHeroTitle" class="text-[#181111] dark:text-white tracking-tighter text-[38px] font-extrabold leading-[1.1]">
                        올봄에는 꼭 가야 해
                    </h1>
                    <div class="mt-3 flex items-center justify-center gap-3">
                        <span class="h-[1px] w-8 bg-primary/40"></span>
                        <h2 id="homeHeroSub" class="text-primary tracking-widest text-[22px] font-bold leading-tight">
                            도쿄 벚꽃 명소
                        </h2>
                        <span class="h-[1px] w-8 bg-primary/40"></span>
                    </div>
                </div>
            </div>

            <!-- Global Bloom Forecast Bar -->
            <div class="px-6 mb-4">
                <div class="bg-white/60 dark:bg-black/20 backdrop-blur-md rounded-2xl p-4 border border-white/40 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="size-10 rounded-full bg-primary/10 flex items-center justify-center">
                            <span class="material-symbols-outlined text-primary text-xl font-bold">insights</span>
                        </div>
                        <div>
                            <p id="labelForecastTitle" class="text-[10px] font-black text-gray-400 uppercase tracking-tighter">2026 Bloom Forecast</p>
                            <p id="labelForecastStatus" class="text-sm font-bold">도쿄는 지금 <span class="text-primary font-black">만개(Peak)</span> 직전!</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-[10px] font-bold text-primary">Mar 22 - Mar 29</p>
                        <p class="text-[9px] text-gray-400">Best Viewing</p>
                    </div>
                </div>
            </div>

            <!-- Quick Icon Menu -->
            <div class="px-6 py-4">
                <div class="grid grid-cols-4 gap-4 text-center">
                    <div class="flex flex-col items-center gap-2 cursor-pointer group" onclick="scrollToElement('locationList')">
                        <div class="flex size-14 items-center justify-center rounded-full bg-white/80 dark:bg-white/10 shadow-lg shadow-primary/5 border border-sakura-pink/30 group-active:scale-90 transition-transform">
                            <span class="material-symbols-outlined text-primary text-2xl">waves</span>
                        </div>
                        <span class="text-[10px] font-extrabold text-gray-600 dark:text-gray-300">나카메구로</span>
                    </div>
                    <div class="flex flex-col items-center gap-2 cursor-pointer group" onclick="scrollToElement('locationList')">
                        <div class="flex size-14 items-center justify-center rounded-full bg-white/80 dark:bg-white/10 shadow-lg shadow-primary/5 border border-sakura-pink/30 group-active:scale-90 transition-transform">
                            <span class="material-symbols-outlined text-primary text-2xl">park</span>
                        </div>
                        <span class="text-[10px] font-extrabold text-gray-600 dark:text-gray-300">우에노</span>
                    </div>
                    <div class="flex flex-col items-center gap-2 cursor-pointer group" onclick="scrollToElement('locationList')">
                        <div class="flex size-14 items-center justify-center rounded-full bg-white/80 dark:bg-white/10 shadow-lg shadow-primary/5 border border-sakura-pink/30 group-active:scale-90 transition-transform">
                            <span class="material-symbols-outlined text-primary text-2xl">kayaking</span>
                        </div>
                        <span class="text-[10px] font-extrabold text-gray-600 dark:text-gray-300">한조몬</span>
                    </div>
                    <div class="flex flex-col items-center gap-2 cursor-pointer group" onclick="scrollToElement('locationList')">
                        <div class="flex size-14 items-center justify-center rounded-full bg-white/80 dark:bg-white/10 shadow-lg shadow-primary/5 border border-sakura-pink/30 group-active:scale-90 transition-transform">
                            <span class="material-symbols-outlined text-primary text-2xl">nightlight</span>
                        </div>
                        <span class="text-[10px] font-extrabold text-gray-600 dark:text-gray-300">롯폰기</span>
                    </div>
                </div>
            </div>

            <!-- List Section -->
            <div class="px-6 py-6 pb-20">
                <div class="flex items-center justify-between mb-6">
                    <h3 id="labelBestSpots" class="text-xl font-extrabold">Best Spots</h3>
                    <div class="flex gap-2">
                        <span class="size-2 rounded-full bg-primary"></span>
                        <span class="size-2 rounded-full bg-primary/30"></span>
                        <span class="size-2 rounded-full bg-primary/10"></span>
                    </div>
                </div>
                
                <div id="locationList" class="flex flex-col gap-4">
                    <!-- Dynamic List -->
                </div>

                <!-- Ad Slot (SEO/Ads Ready) -->
                <div class="ads-slot">AD: Spring Travel Essentials</div>

                <!-- 1-Day Golden Course Section -->
                <div class="mt-10 mb-20 bg-white/60 dark:bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 border border-white shadow-xl">
                    <div class="flex items-center justify-between mb-8">
                        <div>
                            <h3 id="labelCourseTitle" class="text-xl font-black tracking-tight">도쿄 벚꽃 1일 황금 루트</h3>
                            <p id="labelCourseSub" class="text-[10px] font-bold text-gray-400 uppercase mt-1">Perfect Day Trip Itinerary</p>
                        </div>
                        <span class="material-symbols-outlined text-primary text-4xl font-bold">auto_awesome</span>
                    </div>

                    <div class="space-y-12 relative ml-4">
                        <div class="absolute left-[-21px] top-2 bottom-2 w-0.5 bg-gradient-to-b from-primary via-primary/40 to-primary/10"></div>

                        <!-- Step 1 -->
                        <div class="relative">
                            <div class="absolute -left-[32px] top-1 size-6 rounded-full bg-white border-4 border-primary shadow-sm z-10 flex items-center justify-center">
                                <span class="size-1.5 rounded-full bg-primary"></span>
                            </div>
                            <div>
                                <p class="text-[10px] font-black text-primary uppercase mb-1">09:00 AM - 한조몬/구단시타</p>
                                <h4 id="courseStep1Title" class="text-base font-bold">치도리가후치 보트 산책</h4>
                                <p id="courseStep1Desc" class="text-xs text-gray-500 mt-2 leading-relaxed font-medium">가장 붐비기 전, 해자 위로 흐르는 우아한 벚꽃을 보트 위에서 감상하세요.</p>
                            </div>
                        </div>

                        <!-- Transit -->
                        <div class="relative py-2 px-4 bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-100 flex items-center gap-3">
                            <span class="material-symbols-outlined text-xs text-blue-500 font-bold">subway</span>
                            <p id="transit1" class="text-[10px] font-bold text-gray-400 tracking-tight">한조몬선 → 우에노역 (약 20분)</p>
                        </div>

                        <!-- Step 2 -->
                        <div class="relative">
                            <div class="absolute -left-[32px] top-1 size-6 rounded-full bg-white border-4 border-primary/40 shadow-sm z-10 flex items-center justify-center">
                                <span class="size-1.5 rounded-full bg-primary/40"></span>
                            </div>
                            <div>
                                <p class="text-[10px] font-black text-primary uppercase mb-1">01:00 PM - 우에노</p>
                                <h4 id="courseStep2Title" class="text-base font-bold">우에노 공원 & 박물관</h4>
                                <p id="courseStep2Desc" class="text-xs text-gray-500 mt-2 leading-relaxed font-medium">벚꽃 아래에서 즐기는 피크닉과 국립 박물관의 예술 전시를 함께 즐겨보세요.</p>
                            </div>
                        </div>

                        <!-- Transit -->
                        <div class="relative py-2 px-4 bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-100 flex items-center gap-3">
                            <span class="material-symbols-outlined text-xs text-orange-400 font-bold">subway</span>
                            <p id="transit2" class="text-[10px] font-bold text-gray-400 tracking-tight">히비야선 → 나카메구로역 (약 35분)</p>
                        </div>

                        <!-- Step 3 -->
                        <div class="relative">
                            <div class="absolute -left-[32px] top-1 size-6 rounded-full bg-white border-4 border-primary/20 shadow-sm z-10 flex items-center justify-center">
                                <span class="size-1.5 rounded-full bg-primary/20"></span>
                            </div>
                            <div>
                                <p class="text-[10px] font-black text-primary uppercase mb-1">06:30 PM - 나카메구로</p>
                                <h4 id="courseStep3Title" class="text-base font-bold">메구로강 야간 라이트업</h4>
                                <p id="courseStep3Desc" class="text-xs text-gray-500 mt-2 leading-relaxed font-medium">분홍색 제등이 켜진 강변을 따라 샴페인을 즐기며 여행의 대미를 장식하세요.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer / SEO Content -->
                <div class="text-[11px] text-gray-400 leading-relaxed space-y-4 px-2">
                    <p id="footerDesc">본 가이드는 2026년 도쿄 벚꽃 개화 예상 시기를 바탕으로 제작되었습니다. 나카메구로, 우에노 공원, 치도리가후치 등 도쿄 주요 벚꽃 명소의 실시간 혼잡도와 라이트업 시간표를 확인하고 완벽한 봄 여행을 계획하세요.</p>
                    <p class="text-center font-bold tracking-tight">© 2026 Tokyo Sakura Guide. All rights reserved.</p>
                </div>
            </div>

            <!-- Floating Footer Action -->
            <div class="fixed bottom-8 left-1/2 -translate-x-1/2 w-[85%] max-w-[380px] z-40">
                <button class="w-full bg-primary text-white font-black py-4 rounded-full shadow-2xl shadow-primary/40 flex items-center justify-center gap-3 transition-transform active:scale-95 border-t border-white/20">
                    <span class="material-symbols-outlined text-[20px] font-bold">explore</span>
                    <span id="labelSpread">가이드북 펼치기</span>
                </button>
            </div>
        </div>

        <!-- View: Detail Overlay -->
        <div id="detailView" class="transition-view fixed inset-0 z-50 translate-x-full bg-white dark:bg-background-dark overflow-y-auto hidden max-w-[480px] mx-auto shadow-2xl">
            <!-- Header -->
            <div class="sticky top-0 z-[60] flex items-center bg-white/90 dark:bg-background-dark/90 backdrop-blur-xl p-4 pb-2 justify-between border-b border-gray-50">
                <div onclick="closeDetail()" class="text-primary cursor-pointer active:scale-75 transition-transform p-2">
                    <span class="material-symbols-outlined text-[28px] font-black">arrow_back</span>
                </div>
                <h2 id="detailHeaderTitle" class="text-[#181111] dark:text-white text-lg font-extrabold leading-tight flex-1 text-center tracking-tight">Location</h2>
                <div class="flex w-12 items-center justify-end">
                    <button class="flex items-center justify-center rounded-full h-10 w-10 bg-primary/5 text-primary border border-primary/10 active:scale-90 transition-transform">
                        <span class="material-symbols-outlined text-[20px] font-bold">share</span>
                    </button>
                </div>
            </div>

            <div id="detailContent" class="pb-40">
                <!-- Dynamic Content (Timeline, History, Tips, Attractions, Map) -->
            </div>

            <!-- Bottom Floating Bar for Detail -->
            <div class="fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[480px] bg-white/95 dark:bg-background-dark/95 backdrop-blur-xl border-t border-gray-100 p-5 pb-10 flex gap-3 z-[60]">
                <button class="flex-[1] flex items-center justify-center gap-2 h-14 rounded-full bg-primary/5 text-primary font-black text-sm border border-primary/10 active:scale-95 transition-all">
                    <span class="material-symbols-outlined text-sm font-bold">directions</span>
                    <span id="btnDirections">Directions</span>
                </button>
                <button class="flex-[1.5] flex items-center justify-center gap-2 h-14 rounded-full bg-primary text-white font-black text-sm shadow-xl shadow-primary/30 active:scale-95 transition-all">
                    <span class="material-symbols-outlined text-sm font-bold">auto_stories</span>
                    <span id="btnMyTrip">Add to My Trip</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- DATA (Ready for expansion) ---
        const locations = [
            {
                id: 'nakameguro',
                icon: 'waves',
                img: 'https://images.unsplash.com/photo-1542931415-163ae57213ee?q=80&w=2070&auto=format&fit=crop',
                name: { kr: '나카메구로', jp: '中目黒' },
                sub: { kr: '메구로강의 벚꽃 터널', jp: '目黒川の桜のトンネル' },
                station: 'Nakameguro, Tokyo',
                bloom_timeline: { start: 'Mar 20', peak: 'Mar 27', end: 'Apr 03', progress: 85 },
                stats: { crowd: { kr: '매우 높음', jp: '非常に高い' }, bloom: 'Full Bloom' },
                history: {
                    kr: '800그루의 벚꽃이 메구로 강을 따라 분홍빛 터널을 만듭니다. 밤이 되면 켜지는 핑크색 제등이 강물에 비쳐 도쿄 최고의 야경을 선사합니다.',
                    jp: '目黒川沿いに広がる約800本の桜並木. 夜になると点灯するピンクの提灯が川面に映り, 幻想的な雰囲気を醸し出す東京屈指の名所です.'
                },
                tips: [
                    { kr: '핑크 스파클링 와인을 마시며 산책하세요.', jp: 'ピンクのスパークリングワインを片手に.' },
                    { kr: '오후 6시부터 시작되는 라이트업이 핵심입니다.', jp: '午後6時からのライトアップが最大の見どころ입니다.' }
                ],
                attractions: [
                    { name: 'Starbucks Reserve', img: 'https://images.unsplash.com/photo-1509042239860-f550ce710b93?q=80&w=500&auto=format&fit=crop' },
                    { name: 'Onibus Coffee', img: 'https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=500&auto=format&fit=crop' }
                ]
            },
            {
                id: 'ueno',
                icon: 'park',
                img: 'https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?q=80&w=2070&auto=format&fit=crop',
                name: { kr: '우에노 공원', jp: '上野恩賜公園' },
                sub: { kr: '도쿄에서 가장 사랑받는 공원', jp: '東京で最も愛される公園' },
                station: 'Ueno, Taito, Tokyo',
                bloom_timeline: { start: 'Mar 18', peak: 'Mar 25', end: 'Apr 01', progress: 95 },
                stats: { crowd: { kr: '높음', jp: '高い' }, bloom: 'Peak Season' },
                history: {
                    kr: '1,000그루가 넘는 벚꽃이 피어나는 도쿄에서 가장 오래된 공원 중 하나입니다. 일본의 전형적인 축제(하나미) 분위기를 느끼기에 최고입니다.',
                    jp: '1,000本を超える桜が咲き乱れる東京で最も歴史ある公園. 賑やかなお花見文化を体験できる最高の場所です.'
                },
                tips: [
                    { kr: '오전 일찍 방문하여 자리를 확보하세요.', jp: '午前中の早い時間に到着しましょう. ' },
                    { kr: '박물관과 미술관 투어를 병행하면 좋습니다.', jp: '美術館巡りとセットで楽しむのがおすすめ. ' }
                ],
                attractions: [
                    { name: 'National Museum', img: 'https://images.unsplash.com/photo-1518998053574-53f0209f512d?q=80&w=500&auto=format&fit=crop' },
                    { name: 'Ueno Zoo', img: 'https://images.unsplash.com/photo-1534567153574-2b12153a87f0?q=80&w=500&auto=format&fit=crop' }
                ]
            },
            {
                id: 'chidori',
                icon: 'kayaking',
                img: 'https://images.unsplash.com/photo-1524413840807-0c3cb6fa8087?q=80&w=2070&auto=format&fit=crop',
                name: { kr: '치도리가후치', jp: '千鳥ヶ淵' },
                sub: { kr: '해자 위로 흐르는 벚꽃', jp: 'お堀에 흐르는 桜' },
                station: 'Kudanshita, Chiyoda, Tokyo',
                bloom_timeline: { start: 'Mar 22', peak: 'Mar 29', end: 'Apr 05', progress: 40 },
                stats: { crowd: { kr: '보통', jp: '普通' }, bloom: 'Opening' },
                history: {
                    kr: '황궁 해자를 따라 보트를 타며 감상하는 벚꽃은 도쿄에서 가장 우아한 풍경입니다. 화려함보다는 고요하고 품격 있는 봄을 만날 수 있습니다.',
                    jp: '皇居のお堀をボートで進みながら眺める桜. 東京で最も優雅で気品あふれる春の風景です.'
                },
                tips: [
                    { kr: '보트 대기는 오픈 전부터 시작하세요.', jp: 'ボートはオープン前から並ぶのが吉. ' },
                    { kr: '야간 조명 아래 해자는 더욱 신비롭습니다.', jp: '夜のライトアップはさらに神秘的입니다. ' }
                ],
                attractions: [
                    { name: 'Imperial Palace', img: 'https://images.unsplash.com/photo-1542352135-24e5b3b0dfb2?q=80&w=500&auto=format&fit=crop' }
                ]
            }
        ];

        // --- UI TEXT ENGINE ---
        let currentLang = 'kr';
        const uiText = {
            kr: { homeTitle: "올봄에는 꼭 가야 해", homeSub: "도쿄 벚꽃 명소", spread: "가이드북 펼치기", directions: "길 찾기", myTrip: "내 일정에 추가", labelHistory: "정보", labelTips: "꿀팁", labelAtt: "주변 볼거리", labelLoc: "위치", labelCrowd: "혼잡도", labelBestSpots: "Best Spots", forecastTitle: "2026 개화 예측", forecastStatus: "도쿄는 지금 <span class='text-primary font-black'>만개(Peak)</span> 직전!", timelineTitle: "벚꽃 타임라인", timelineStart: "개화", timelinePeak: "만개", timelineEnd: "낙화", courseTitle: "도쿄 벚꽃 1일 황금 루트", courseSub: "Perfect Day Trip Itinerary", step1Title: "치도리가후치 보트 산책", step1Desc: "가장 붐비기 전, 해자 위로 흐르는 우아한 벚꽃을 보트 위에서 감상하세요.", transit1: "한조몬선 → 우에노역 (약 20분)", step2Title: "우에노 공원 & 박물관", step2Desc: "벚꽃 아래에서 즐기는 피크닉과 국립 박물관의 예술 전시를 함께 즐겨보세요.", transit2: "히비야선 → 나카메구로역 (약 35분)", step3Title: "메구로강 야간 라이트업", step3Desc: "분홍색 제등이 켜진 강변을 따라 샴페인을 즐기며 여행의 대미를 장식하세요." },
            jp: { homeTitle: "今年絶対行くべき", homeSub: "東京の桜名所", spread: "ガイドブックを開く", directions: "ルート案内", myTrip: "旅程に追加", labelHistory: "歴史と情報", labelTips: "お花見의 팁", labelAtt: "周辺のスポット", labelLoc: "位置", labelCrowd: "混雑状況", labelBestSpots: "人気スポット", forecastTitle: "2026 開花予想", forecastStatus: "東京は現在 <span class='text-primary font-black'>満開(Peak)</span> 直前!", timelineTitle: "桜タイムライン", timelineStart: "開花", timelinePeak: "満開", timelineEnd: "落花", courseTitle: "東京桜1일 골든루트", courseSub: "Perfect Day Trip Itinerary", step1Title: "千鳥ヶ淵ボート散策", step1Desc: "混雑する前に, お堀に流れる優雅な桜をボートの上から堪能しましょう.", transit1: "半蔵門線 → 上野駅 (約20分)", step2Title: "上野公園 ＆ 博物館", step2Desc: "桜の下でのピクニックと国立博物館の芸術展示を一緒に楽しんでください.", transit2: "日比谷線 → 中目黒駅 (約35分)", step3Title: "目黒川夜間ライトアップ", step3Desc: "ピンクの提灯が灯る川沿いでシャンパンを楽しみ, 旅を締めくくりましょう." }
        };

        function init() {
            renderHomeList();
            setupEvents();
            updateUIStrings();
            createPetals();
        }

        function createPetals() {
            const container = document.getElementById('petalContainer');
            for(let i=0; i<15; i++) {
                const petal = document.createElement('div');
                petal.className = 'petal';
                petal.style.left = Math.random() * 100 + 'vw';
                petal.style.width = Math.random() * 10 + 5 + 'px';
                petal.style.height = petal.style.width;
                petal.style.animationDuration = Math.random() * 3 + 4 + 's';
                petal.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(petal);
            }
        }

        function renderHomeList() {
            const list = document.getElementById('locationList');
            list.innerHTML = '';
            locations.forEach(loc => {
                const item = document.createElement('div');
                item.className = "group flex items-center justify-between p-5 bg-white/70 dark:bg-white/5 backdrop-blur-md border border-white/40 dark:border-white/10 rounded-2xl shadow-sm hover:shadow-lg hover:bg-white active:scale-95 transition-all cursor-pointer";
                item.onclick = () => openDetail(loc.id);
                item.innerHTML = `
                    <div class="flex items-center gap-4">
                        <div class="size-11 rounded-full bg-primary/10 flex items-center justify-center border border-primary/10">
                            <span class="material-symbols-outlined text-primary text-xl font-bold">${loc.icon}</span>
                        </div>
                        <div>
                            <p class="text-[13px] font-black text-[#181111] dark:text-white">${loc.name[currentLang]}</p>
                            <p class="text-[10px] text-gray-400 font-bold tracking-tight">${loc.stats.bloom}</p>
                        </div>
                    </div>
                    <span class="material-symbols-outlined text-gray-300 group-hover:text-primary transition-all">chevron_right</span>
                `;
                list.appendChild(item);
            });
        }

        function openDetail(id) {
            const loc = locations.find(l => l.id === id);
            const view = document.getElementById('detailView');
            const lang = uiText[currentLang];
            
            document.getElementById('detailHeaderTitle').innerText = loc.name[currentLang];
            
            document.getElementById('detailContent').innerHTML = `
                <div class="px-5 py-4">
                    <div class="w-full bg-center bg-no-repeat bg-cover flex flex-col justify-end overflow-hidden rounded-3xl min-h-[300px] relative shadow-2xl" style="background-image: url('${loc.img}');">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                        <div class="relative p-6">
                            <span class="bg-primary text-white text-[10px] font-black uppercase tracking-[0.2em] px-3 py-1.5 rounded-full border border-white/30">Recommended Spot</span>
                        </div>
                    </div>
                </div>

                <div class="px-6 pt-4 pb-2 text-center">
                    <h1 class="text-[#181111] dark:text-white tracking-tighter text-[34px] font-black leading-tight">${loc.name[currentLang]}</h1>
                    <div class="flex gap-2 mt-4 justify-center flex-wrap">
                        <div class="flex h-8 items-center gap-x-2 rounded-full bg-primary/5 px-4 border border-primary/10">
                            <span class="material-symbols-outlined text-primary text-[14px] font-bold">group</span>
                            <p class="text-primary text-[9px] font-black uppercase tracking-tight">${lang.labelCrowd}: ${loc.stats.crowd[currentLang]}</p>
                        </div>
                    </div>
                </div>

                <div class="px-6 py-4">
                    <div class="bg-white/60 dark:bg-white/5 backdrop-blur-md rounded-3xl p-6 border border-white shadow-sm">
                        <h3 class="text-sm font-black mb-4 flex items-center gap-2">
                            <span class="material-symbols-outlined text-primary text-lg font-bold">calendar_month</span> ${lang.timelineTitle}
                        </h3>
                        <div class="timeline-track mb-8">
                            <div class="timeline-progress" style="width: ${loc.bloom_timeline.progress}%"></div>
                            <div class="timeline-marker" style="left: ${loc.bloom_timeline.progress}%"></div>
                            <div class="absolute -bottom-7 left-0 text-center transform">
                                <p class="text-[9px] font-bold text-gray-400">${lang.timelineStart}</p>
                                <p class="text-[8px] font-black">${loc.bloom_timeline.start}</p>
                            </div>
                            <div class="absolute -bottom-7 left-1/2 text-center transform -translateX-1/2">
                                <p class="text-[9px] font-bold text-primary">${lang.timelinePeak}</p>
                                <p class="text-[8px] font-black text-primary">${loc.bloom_timeline.peak}</p>
                            </div>
                            <div class="absolute -bottom-7 right-0 text-center transform">
                                <p class="text-[9px] font-bold text-gray-400">${lang.timelineEnd}</p>
                                <p class="text-[8px] font-black">${loc.bloom_timeline.end}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="px-8 py-6">
                    <h3 class="text-[#181111] dark:text-white text-xl font-black mb-4 flex items-center gap-2">
                        <span class="w-1.5 h-6 bg-primary rounded-full"></span> ${lang.labelHistory}
                    </h3>
                    <p class="text-gray-500 dark:text-white/60 text-base leading-relaxed font-medium">
                        ${loc.history[currentLang]}
                    </p>
                </div>

                <div class="px-6 py-4">
                    <div class="bg-primary/5 dark:bg-primary/10 rounded-3xl p-7 border border-primary/10">
                        <div class="flex items-center gap-2 mb-4">
                            <span class="material-symbols-outlined text-primary font-black">tips_and_updates</span>
                            <h3 class="text-primary text-lg font-black tracking-tight">${lang.labelTips}</h3>
                        </div>
                        <ul class="space-y-4">
                            ${loc.tips.map(tip => `
                                <li class="flex gap-4 text-sm font-bold text-[#181114]/80 dark:text-white/80 leading-relaxed">
                                    <span class="size-2 rounded-full bg-primary mt-2 shrink-0"></span> 
                                    ${tip[currentLang]}
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>

                <div class="py-6">
                    <div class="px-8 flex justify-between items-center mb-6">
                        <h3 class="text-[#181111] dark:text-white text-xl font-black">${lang.labelAtt}</h3>
                        <button class="text-primary text-xs font-black uppercase tracking-widest">View All</button>
                    </div>
                    <div class="flex overflow-x-auto hide-scrollbar gap-5 px-8 pb-4">
                        ${loc.attractions.map(att => `
                            <div class="min-w-[180px] w-[180px] flex flex-col gap-3">
                                <div class="h-44 w-full rounded-3xl bg-center bg-cover shadow-xl border border-white/20" style="background-image: url('${att.img}');"></div>
                                <p class="text-[#181111] dark:text-white text-xs font-black leading-tight px-1">${att.name}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="px-8 py-6">
                    <h3 class="text-[#181111] dark:text-white text-xl font-black mb-5">${lang.labelLoc}</h3>
                    <div class="w-full h-52 rounded-3xl bg-slate-100 dark:bg-slate-800 overflow-hidden relative border border-gray-100 shadow-inner">
                        <img class="w-full h-full object-cover opacity-50 grayscale" src="https://lh3.googleusercontent.com/aida-public/AB6AXuBMNi7p1v3Ppixb5wSKHQs-EnrlHOcYO_qGet9cMpHIgJxwxFSfxtkQf3Bv3PtDUJceznR_3SOg4qLcf-M6ACSizKdaLjd8bVQOXl4_EBmwCQVLh9Um3FKXd66Cl7DgU0MchoNIOObIYUiCcs0qMoxEknVyi__0glpDDYME1ryulfzbD6kWrWO4UBemh9IAgt0NL1AeEWGUQQRnMQwy1tFTLUk243RC5DWpk0YTc5nQlw8m0F4_yZMf8-Tz7n0ePtagu2W90GikWt0"/>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span class="material-symbols-outlined text-primary text-[54px] drop-shadow-2xl font-black" style="font-variation-settings: 'FILL' 1">location_on</span>
                        </div>
                        <div class="absolute bottom-5 left-5 right-5 bg-white/95 dark:bg-background-dark/95 p-4 rounded-2xl flex items-center justify-between shadow-2xl">
                            <p class="text-[10px] font-black dark:text-white uppercase tracking-tight">${loc.station}</p>
                            <span class="material-symbols-outlined text-primary text-[20px] font-bold">open_in_new</span>
                        </div>
                    </div>
                </div>
            `;

            view.classList.remove('hidden');
            setTimeout(() => view.classList.remove('translate-x-full'), 10);
            window.scrollTo(0,0);
        }

        function closeDetail() {
            const view = document.getElementById('detailView');
            view.classList.add('translate-x-full');
            setTimeout(() => view.classList.add('hidden'), 500);
        }

        function toggleLang() {
            currentLang = currentLang === 'kr' ? 'jp' : 'kr';
            document.getElementById('langBtnHome').innerText = currentLang === 'kr' ? 'JP / 日本語' : 'KR / 한국어';
            updateUIStrings();
            renderHomeList();
        }

        function updateUIStrings() {
            const lang = uiText[currentLang];
            document.getElementById('homeHeroTitle').innerText = lang.homeTitle;
            document.getElementById('homeHeroSub').innerText = lang.homeSub;
            document.getElementById('labelSpread').innerText = lang.spread;
            document.getElementById('btnDirections').innerText = lang.directions;
            document.getElementById('btnMyTrip').innerText = lang.myTrip;
            document.getElementById('labelBestSpots').innerText = lang.labelBestSpots;
            document.getElementById('labelForecastTitle').innerText = lang.forecastTitle;
            document.getElementById('labelForecastStatus').innerHTML = lang.forecastStatus;
            
            document.getElementById('labelCourseTitle').innerText = lang.courseTitle;
            document.getElementById('labelCourseSub').innerText = lang.courseSub;
            document.getElementById('courseStep1Title').innerText = lang.step1Title;
            document.getElementById('courseStep1Desc').innerText = lang.step1Desc;
            document.getElementById('transit1').innerText = lang.transit1;
            document.getElementById('courseStep2Title').innerText = lang.step2Title;
            document.getElementById('courseStep2Desc').innerText = lang.step2Desc;
            document.getElementById('transit2').innerText = lang.transit2;
            document.getElementById('courseStep3Title').innerText = lang.step3Title;
            document.getElementById('courseStep3Desc').innerText = lang.step3Desc;
        }

        function scrollToElement(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function setupEvents() {
            document.getElementById('langBtnHome').onclick = toggleLang;
        }

        window.onload = init;
    </script>
</body>
</html>